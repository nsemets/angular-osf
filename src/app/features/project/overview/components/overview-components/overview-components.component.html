<div class="node flex flex-column p-2 pb-4 gap-4">
  <div class="flex align-items-center pt-3 pl-3 pr-3 justify-content-between">
    <h2>{{ 'project.overview.components.title' | translate }}</h2>

    @if (canEdit()) {
      <p-button
        (onClick)="handleAddComponent()"
        severity="secondary"
        [label]="'project.overview.components.addComponentButton' | translate"
      />
    }
  </div>

  <div class="node-container flex flex-column gap-3 px-3" #dropListContainer>
    @if (isComponentsLoading()) {
      <p-skeleton width="100%" height="7rem" />
    } @else {
      @if (components().length) {
        <div
          class="components-drop-list w-full flex flex-column gap-4"
          cdkDropList
          (cdkDropListDropped)="onReorder($event)"
        >
          @for (component of reorderedComponents(); track component.id) {
            <div
              class="component-drag-item"
              cdkDrag
              cdkDragLockAxis="y"
              [cdkDragBoundary]="dropListContainer"
              [cdkDragDisabled]="isDragDisabled()"
            >
              <osf-component-card
                class="w-full"
                [component]="component"
                [anonymous]="anonymous()"
                (navigate)="handleComponentNavigate($event)"
                (menuAction)="handleMenuAction($event, component.id)"
              />
            </div>
          }
        </div>

        @if (hasMoreComponents()) {
          <div class="flex justify-content-center">
            <p-button
              (onClick)="loadMoreComponents()"
              severity="secondary"
              [label]="'common.buttons.seeMore' | translate"
              [loading]="isComponentsLoading()"
            />
          </div>
        }
      } @else {
        <div [innerHtml]="'project.overview.components.noComponentsMessage' | translate"></div>
      }
    }
  </div>
</div>
